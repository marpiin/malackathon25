# ğŸ§  Dashboard de Salud Mental

![Python](https://img.shields.io/badge/python-v3.12+-blue.svg)
![Flask](https://img.shields.io/badge/flask-v3.0+-green.svg)
![Oracle](https://img.shields.io/badge/oracle-autonomous-red.svg)
![License](https://img.shields.io/badge/license-MIT-blue.svg)

Dashboard interactivo para anÃ¡lisis y visualizaciÃ³n de datos de salud mental en EspaÃ±a, desarrollado con Flask y Oracle Autonomous Database.

## ğŸ“Š CaracterÃ­sticas

- **VisualizaciÃ³n de datos en tiempo real**Â con grÃ¡ficos interactivos usando Chart.js
    
- **Filtros avanzados**Â por comunidad autÃ³noma, sexo, categorÃ­a diagnÃ³stica y fechas
    
- **AnÃ¡lisis estadÃ­stico**Â de estancias, costes y admisiones en UCI
    
- **Tabla de datos paginada**Â con exportaciÃ³n a CSV
    
- **Sistema de autenticaciÃ³n**Â para acceso seguro
    
- **DiseÃ±o responsive**Â compatible con dispositivos mÃ³viles
    
- **ConexiÃ³n segura**Â a Oracle Autonomous Database mediante wallet
    

## ğŸš€ Demo

![Dashboard Preview](screenshot.png)

## ğŸ“‹ Requisitos Previos

- Python 3.12 o superior
    
- Oracle Autonomous Database (ATP/ADW)
    
- Wallet de Oracle Cloud para conexiÃ³n segura
    
- pip y virtualenv
    

## ğŸ”§ InstalaciÃ³n

## 1. Clonar el repositorio

```bash
git clone https://github.com/tu-usuario/salud-mental-dashboard.git cd salud-mental-dashboard
```

## 2. Crear y activar entorno virtual

```bash
python -m venv .venv # En Linux/Mac source .venv/bin/activate # En Windows .venv\Scripts\activate
```

## 3. Instalar dependencias

```bash
pip install -r requirements.txt
```

## 4. Configurar variables de entorno

Crea un archivoÂ `.env`Â en la raÃ­z del proyecto:

```bash
SECRET_KEY=tu-clave-secreta-super-segura 
# Credenciales de login 
LOGIN_USERNAME=admin 
LOGIN_PASSWORD=tu-contraseÃ±a-segura 
# ConfiguraciÃ³n de Oracle Database 
DB_USER=tu-usuario 
DB_PASSWORD=tu-contraseÃ±a 
DB_DSN=tcps://tu-host:1522/tu-servicio 
# Wallet de Oracle 
WALLET_LOCATION=/ruta/a/tu/wallet 
WALLET_PASSWORD=tu-password-wallet
```

## 5. Descargar el Wallet de Oracle

1. Accede a tu Oracle Cloud Console
    
2. Ve a tu Autonomous Database
    
3. Descarga el wallet (Database Connection > Download Wallet)
    
4. Descomprime el wallet en una carpeta segura
    
5. ActualizaÂ `WALLET_LOCATION`Â en elÂ `.env`Â con la ruta
    

## ğŸ¯ Uso

## Ejecutar la aplicaciÃ³n

```bash
python app.py
```

La aplicaciÃ³n estarÃ¡ disponible enÂ `http://localhost:5000`

## Credenciales de acceso

Usa las credenciales configuradas en tu archivoÂ `.env`:

- **Usuario**: El valor deÂ `LOGIN_USERNAME`
    
- **ContraseÃ±a**: El valor deÂ `LOGIN_PASSWORD`
    

## ğŸ“ Estructura del Proyecto

```text
salud-mental-dashboard/
â”‚
â”œâ”€â”€ app.py                      # AplicaciÃ³n principal Flask
â”œâ”€â”€ config.py                   # ConfiguraciÃ³n y variables de entorno
â”œâ”€â”€ requirements.txt            # Dependencias del proyecto
â”œâ”€â”€ .env                        # Variables de entorno (no incluir en git)
â”œâ”€â”€ .env.example               # Ejemplo de variables de entorno
â”œâ”€â”€ .gitignore                 # Archivos a ignorar por git
â”‚
â”œâ”€â”€ templates/                  # Plantillas HTML
â”‚   â”œâ”€â”€ base.html              # Plantilla base
â”‚   â”œâ”€â”€ login.html             # PÃ¡gina de login
â”‚   â”œâ”€â”€ index.html             # Dashboard principal
â”‚   â””â”€â”€ data_table.html        # Tabla de datos
â”‚
â”œâ”€â”€ static/                     # Archivos estÃ¡ticos
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css          # Estilos personalizados
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ main.js            # Scripts JavaScript (opcional)
â”‚
â””â”€â”€ oracle_wallet/             # Wallet de Oracle (no incluir en git)
    â”œâ”€â”€ cwallet.sso
    â”œâ”€â”€ tnsnames.ora
    â””â”€â”€ ...
```

## ğŸ—„ï¸ Base de Datos

## Tabla Principal:Â `ENFERMEDADESMENTALESDIAGNOSTICO`

La aplicaciÃ³n trabaja con datos de salud mental que incluyen:

- **InformaciÃ³n demogrÃ¡fica**: Comunidad AutÃ³noma, Sexo, Edad
    
- **Datos clÃ­nicos**: DiagnÃ³sticos, CategorÃ­as, Procedimientos
    
- **Estancias hospitalarias**: Fechas de ingreso, dÃ­as de estancia
    
- **InformaciÃ³n UCI**: Ingresos y dÃ­as en UCI
    
- **Costes**: AnÃ¡lisis de costes APR
    

## ConfiguraciÃ³n de la tabla

Si necesitas crear la columna ID como clave primaria:

```sql
ALTER TABLE ENFERMEDADESMENTALESDIAGNOSTICO  ADD (ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY);`
```

## ğŸ“Š Funcionalidades

## Dashboard Principal

- **Tarjetas de resumen**: Total de registros, estancia promedio, coste total, ingresos UCI
    
- **GrÃ¡fico de comunidades**: DistribuciÃ³n de pacientes por comunidad autÃ³noma
    
- **GrÃ¡fico de sexo**: DistribuciÃ³n por gÃ©nero
    
- **CategorÃ­as diagnÃ³sticas**: Top 7 diagnÃ³sticos mÃ¡s frecuentes
    
- **EvoluciÃ³n temporal**: Ingresos por mes con tendencias
    
- **AnÃ¡lisis UCI**: EstadÃ­sticas detalladas de ingresos en UCI
    

## Tabla de Datos

- VisualizaciÃ³n completa de todos los registros
    
- PaginaciÃ³n para mejor rendimiento
    
- Filtros aplicables en tiempo real
    
- ExportaciÃ³n a CSV de datos filtrados
    

## Filtros Disponibles

- Comunidad AutÃ³noma
    
- Sexo
    
- CategorÃ­a DiagnÃ³stica
    
- Rango de fechas (inicio/fin)
    

## ğŸ” Seguridad

- **AutenticaciÃ³n**Â obligatoria para todas las rutas
    
- **Sesiones seguras**Â con Flask sessions
    
- **Credenciales**Â almacenadas en variables de entorno
    
- **ConexiÃ³n encriptada**Â a Oracle mediante TLS/SSL
    
- **Wallet protegido**Â con contraseÃ±a
    

## ğŸ› ï¸ TecnologÃ­as Utilizadas

- **Backend**: Flask (Python)
    
- **Base de Datos**: Oracle Autonomous Database
    
- **Driver**: python-oracledb (modo thin)
    
- **Frontend**: Bootstrap 5, Chart.js
    
- **AnÃ¡lisis de Datos**: Pandas, NumPy
    
- **GestiÃ³n de ConfiguraciÃ³n**: python-dotenv
    

## ğŸ“¦ Dependencias Principales

```text
Flask==3.0.0 oracledb==2.0.0 pandas==2.1.0 numpy==1.24.0 python-dotenv==1.0.0
```

## ğŸ¤ Contribuir

Las contribuciones son bienvenidas. Por favor:

1. Haz fork del proyecto
    
2. Crea una rama para tu feature (`git checkout -b feature/AmazingFeature`)
    
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
    
4. Push a la rama (`git push origin feature/AmazingFeature`)
    
5. Abre un Pull Request
    

## ğŸ“ Notas de Desarrollo

## Modo Thin vs Thick

La aplicaciÃ³n usa python-oracledb enÂ **modo thin**Â (sin Oracle Instant Client). Si necesitas modo thick:

1. Descarga Oracle Instant Client
    
2. DescomentaÂ `oracledb.init_oracle_client()`Â enÂ `app.py`
    
3. Configura la ruta del cliente
    

## SoluciÃ³n de Problemas

**Error de conexiÃ³n a Oracle:**

- Verifica que el wallet estÃ© en la ubicaciÃ³n correcta
    
- Comprueba las credenciales en elÂ `.env`
    
- AsegÃºrate de que tu IP estÃ¡ permitida en Oracle Cloud
    

**Error de columnas:**

- Verifica los nombres de columnas en Oracle (case-sensitive)
    
- Usa el scriptÂ `listar_columnas.py`Â para verificar
    

**Problemas de autenticaciÃ³n:**

- Verifica que las credenciales enÂ `.env`Â sean correctas
    
- Comprueba queÂ `SECRET_KEY`Â estÃ© configurada
    

## ğŸ“„ Licencia

Este proyecto estÃ¡ bajo la Licencia MIT. Ver el archivoÂ `LICENSE`Â para mÃ¡s detalles.

## ğŸ‘¥ Autores

- **Alejandro GonzÃ¡lez**Â -Â _Desarrollo web + backend + conexiÃ³n base de datos oracle_Â -Â [alexgo414](https://github.com/alexgo414)

- **Juan JosÃ© MarÃ­n Pino**
    

## ğŸ™ Agradecimientos

- Datos proporcionados por el Sistema Nacional de Salud
    
- Malackathon 2025 - Hackathon de la ETSII
    
- Oracle Cloud Infrastructure
    

## ğŸ“§ Contacto

Alejandro GonzÃ¡lez -Â [@alexgo313](https://x.com/alexgo313)Â -Â [alejandro.gonvi@gmail.com](mailto:alejandro.gonvi@gmail.com)

Juan JosÃ© MarÃ­n Pino

Link del proyecto:Â [https://github.com/marpiin/malackathon25](https://github.com/marpiin/malackathon25)

---

â­ï¸ Si este proyecto te ha sido Ãºtil, considera darle una estrella en GitHub